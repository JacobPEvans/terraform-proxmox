# Proxmox Configuration Example
# Copy this file to terraform.tfvars and customize for your environment

# Proxmox API Configuration
proxmox_api_endpoint = "https://your-proxmox-server.local:8006/api2/json"
proxmox_api_token    = "terraform@pve!terraform=your-api-token-here"
proxmox_insecure     = true

# Proxmox Node Configuration
proxmox_node     = "pve"
proxmox_username = "proxmox"

# SSH Configuration for Proxmox Host
proxmox_ssh_username    = "root@pam"
proxmox_ssh_private_key = "~/.ssh/id_rsa_pve"

# SSH Configuration for VMs
# These paths should point to your VM SSH keys
vm_ssh_public_key_path  = "~/.ssh/id_rsa_vm.pub"
vm_ssh_private_key_path = "~/.ssh/id_rsa_vm"

# Environment
environment = "homelab"

# Cloud-init configuration (use .local.yml for real deployment)
ansible_cloud_init_file = "cloud-init/ansible-server-example.yml"

# VM Configuration - General VMs (Splunk managed via splunk-vm module, see main.tf)
# Note: ansible, claude1, cribl-edge, etc. are manually-managed LXC containers (see docs/INFRASTRUCTURE_NUMBERING.md)
# Splunk Enterprise all-in-one VM is created via the splunk-vm module in main.tf
# VM ID: splunk-vm (100), IP: 192.168.1.100/32
# Template built by Packer (see packer/splunk.pkr.hcl)
vms = {}

# Container Configuration
containers = {
  "splunk-mgmt" = {
    vm_id            = 205
    hostname         = "splunk-mgmt"
    description      = "Splunk Management - Search Head, Deployment Server, License Manager, MC, Cluster Manager"
    cpu_cores        = 3
    memory_dedicated = 3072
    memory_swap      = 1024
    tags             = ["terraform", "splunk", "management", "container"]
    pool_id          = "logging"

    root_disk = {
      datastore_id = "local-zfs"
      size         = 100
    }

    network_interfaces = [{
      name     = "eth0"
      bridge   = "vmbr0"
      firewall = true
    }]

    ip_config = {
      ipv4_address = "192.168.1.205/32"
      ipv4_gateway = "192.168.1.1"
    }
  }
}

# Resource Pool Configuration
pools = {
  "logging" = {
    comment = "Logging cluster infrastructure"
  }
}

# Firewall Configuration
management_network = "192.168.1.0/24"
splunk_network     = "192.168.1.100,192.168.1.101,192.168.1.205"

# Storage Configuration (optional)
datastores = {}

# ISO Configuration
proxmox_iso_debian         = "debian-13.2.0-amd64-netinst.iso"
proxmox_ct_template_debian = "debian-13-standard_13.2-1_amd64.tar.zst"
